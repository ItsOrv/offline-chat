{"ast":null,"code":"var _jsxFileName = \"/home/orv/Documents/Projects/offline/offline/client/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [unreadMessages, setUnreadMessages] = useState([]);\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchUsername, setSearchUsername] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searching, setSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n  const [error, setError] = useState('');\n  const socketRef = useRef();\n\n  // Initialize socket connection\n  useEffect(() => {\n    if (!user) return;\n    const serverUrl = process.env.REACT_APP_API_URL || '';\n    socketRef.current = io(serverUrl);\n\n    // Connect user\n    socketRef.current.emit('user_connected', user.id);\n\n    // Clean up socket connection on unmount\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [user]);\n\n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !user) return;\n\n    // Listen for private messages\n    socketRef.current.on('receive_private_message', message => {\n      console.log('Received private message in dashboard:', message);\n      // Refresh unread messages\n      fetchUnreadMessages();\n      // Add notification sound\n      const audio = new Audio('/notification.mp3');\n      audio.play().catch(e => console.log('Error playing notification sound:', e));\n    });\n    return () => {\n      socketRef.current.off('receive_private_message');\n    };\n  }, [user]);\n\n  // Fetch unread private messages\n  const fetchUnreadMessages = async () => {\n    if (!user) return;\n    try {\n      setError('');\n      const {\n        data\n      } = await axios.get('/api/messages/private/unread');\n      if (data.success) {\n        console.log('Unread messages data:', data);\n        // Make sure each item has an id property\n        const formattedMessages = data.messageCounts.map(item => ({\n          ...item,\n          id: item.id || item.senderId // Use id if available, otherwise use senderId\n        }));\n        setUnreadMessages(formattedMessages);\n      }\n    } catch (error) {\n      console.error('Error fetching unread messages:', error);\n      setError('Error loading messages');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch user's conversations\n  const fetchConversations = async () => {\n    if (!user) return;\n    try {\n      setError('');\n      const {\n        data\n      } = await axios.get('/api/messages/private/conversations');\n      if (data.success) {\n        console.log('Conversations data:', data);\n        setConversations(data.conversations);\n      }\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n      // Don't show error for this as it's not critical\n    }\n  };\n\n  // Fetch data on component mount\n  useEffect(() => {\n    if (!user) return;\n    fetchUnreadMessages();\n    fetchConversations();\n  }, [user]);\n\n  // Handle user search\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchUsername.trim()) {\n      setSearchError('Please enter a username');\n      setTimeout(() => setSearchError(''), 3000);\n      return;\n    }\n    setSearching(true);\n    setSearchError('');\n    try {\n      const {\n        data\n      } = await axios.get(`/api/users/search/${searchUsername}`);\n      if (data.success) {\n        setSearchResults(data.users);\n        if (data.users.length === 0) {\n          setSearchError('No users found');\n          setTimeout(() => setSearchError(''), 3000);\n        }\n      }\n    } catch (error) {\n      console.error('Error searching users:', error);\n      setSearchError('Error searching users');\n      setTimeout(() => setSearchError(''), 3000);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  // Navigate to private chat\n  const goToPrivateChat = userId => {\n    navigate(`/private-chat/${userId}`);\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Please log in to view this page.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DashboardContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"User Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Welcome to Orv Chat Platform\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardsContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Public Chatroom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Chat with other users in the public chatroom. Your messages will be displayed after admin approval.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/chat\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                children: \"Enter Chatroom\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Private Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Chat privately with other users.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 23\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [unreadMessages.length > 0 && /*#__PURE__*/_jsxDEV(UnreadContainer, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Unread Messages:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(UnreadList, {\n                children: unreadMessages.map((item, index) => /*#__PURE__*/_jsxDEV(UnreadItem, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => goToPrivateChat(item.id),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: item.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(UnreadBadge, {\n                      children: item.count\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 27\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 19\n            }, this), conversations.length > 0 && /*#__PURE__*/_jsxDEV(ConversationsContainer, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Recent Conversations:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ConversationsList, {\n                children: conversations.map(convo => /*#__PURE__*/_jsxDEV(ConversationItem, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => goToPrivateChat(convo.userId),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: convo.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: new Date(convo.lastMessageTime).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 27\n                  }, this)\n                }, convo.userId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 19\n            }, this), unreadMessages.length === 0 && conversations.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No messages. Start a conversation!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: [/*#__PURE__*/_jsxDEV(SearchUserForm, {\n              onSubmit: handleSearch,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Enter username...\",\n                className: \"form-control\",\n                value: searchUsername,\n                onChange: e => setSearchUsername(e.target.value),\n                disabled: searching\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SearchButton, {\n                type: \"submit\",\n                disabled: searching,\n                children: searching ? 'Searching...' : 'Search'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), searchError && /*#__PURE__*/_jsxDEV(SearchError, {\n              children: searchError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 31\n            }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(SearchResultsContainer, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Search Results:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SearchResultsList, {\n                children: searchResults.map(result => /*#__PURE__*/_jsxDEV(SearchResultItem, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => goToPrivateChat(result.id),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: result.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: result.isAdmin ? '(Admin)' : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 25\n                  }, this)\n                }, result.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), user.isAdmin && /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Admin Panel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Manage messages, approve or reject user messages, and manage users.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/admin\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                children: \"Enter Admin Panel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Dashboard, \"imyml5g72XOMA4moL+v8XTMfqK0=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Dashboard;\nconst DashboardContainer = styled.div`\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n_c2 = DashboardContainer;\nconst Header = styled.div`\n  text-align: center;\n  margin-bottom: 2rem;\n  \n  h1 {\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n  }\n`;\n_c3 = Header;\nconst CardsContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 2rem;\n`;\n_c4 = CardsContainer;\nconst Card = styled.div`\n  background-color: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px var(--shadow-color);\n  padding: 1.5rem;\n  \n  h2 {\n    color: var(--accent-color);\n    margin-bottom: 1rem;\n    font-size: 1.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n    margin-bottom: 1.5rem;\n  }\n`;\n_c5 = Card;\nconst CardFooter = styled.div`\n  margin-top: 1.5rem;\n  text-align: center;\n`;\n_c6 = CardFooter;\nconst Button = styled.button`\n  background-color: var(--accent-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.75rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  \n  &:hover {\n    background-color: var(--accent-hover);\n  }\n`;\n_c7 = Button;\nconst UnreadContainer = styled.div`\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n_c8 = UnreadContainer;\nconst UnreadList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n_c9 = UnreadList;\nconst UnreadItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    text-decoration: none;\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n  }\n`;\n_c0 = UnreadItem;\nconst UnreadBadge = styled.span`\n  background-color: var(--danger-color);\n  color: white;\n  font-size: 0.8rem;\n  padding: 0.2rem 0.5rem;\n  border-radius: 50%;\n  min-width: 1.5rem;\n  text-align: center;\n`;\n_c1 = UnreadBadge;\nconst ConversationsContainer = styled.div`\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n_c10 = ConversationsContainer;\nconst ConversationsList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n_c11 = ConversationsList;\nconst ConversationItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n    \n    small {\n      color: var(--text-secondary);\n      font-size: 0.7rem;\n    }\n  }\n`;\n_c12 = ConversationItem;\nconst SearchUserForm = styled.form`\n  display: flex;\n  gap: 0.5rem;\n`;\n_c13 = SearchUserForm;\nconst SearchButton = styled.button`\n  background-color: var(--accent-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  \n  &:hover {\n    background-color: var(--accent-hover);\n  }\n  \n  &:disabled {\n    background-color: #555;\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;\n_c14 = SearchButton;\nconst SearchError = styled.div`\n  color: var(--danger-color);\n  font-size: 0.9rem;\n  margin-top: 0.5rem;\n`;\n_c15 = SearchError;\nconst ErrorMessage = styled.div`\n  color: var(--danger-color);\n  font-size: 0.9rem;\n  margin: 0.5rem 0;\n  padding: 0.5rem;\n  background-color: rgba(231, 76, 60, 0.1);\n  border-radius: 4px;\n  text-align: center;\n`;\n_c16 = ErrorMessage;\nconst SearchResultsContainer = styled.div`\n  margin-top: 1rem;\n  text-align: left;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n_c17 = SearchResultsContainer;\nconst SearchResultsList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n_c18 = SearchResultsList;\nconst SearchResultItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n    \n    small {\n      color: var(--accent-color);\n      font-size: 0.8rem;\n    }\n  }\n`;\n_c19 = SearchResultItem;\nexport default Dashboard;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"Dashboard\");\n$RefreshReg$(_c2, \"DashboardContainer\");\n$RefreshReg$(_c3, \"Header\");\n$RefreshReg$(_c4, \"CardsContainer\");\n$RefreshReg$(_c5, \"Card\");\n$RefreshReg$(_c6, \"CardFooter\");\n$RefreshReg$(_c7, \"Button\");\n$RefreshReg$(_c8, \"UnreadContainer\");\n$RefreshReg$(_c9, \"UnreadList\");\n$RefreshReg$(_c0, \"UnreadItem\");\n$RefreshReg$(_c1, \"UnreadBadge\");\n$RefreshReg$(_c10, \"ConversationsContainer\");\n$RefreshReg$(_c11, \"ConversationsList\");\n$RefreshReg$(_c12, \"ConversationItem\");\n$RefreshReg$(_c13, \"SearchUserForm\");\n$RefreshReg$(_c14, \"SearchButton\");\n$RefreshReg$(_c15, \"SearchError\");\n$RefreshReg$(_c16, \"ErrorMessage\");\n$RefreshReg$(_c17, \"SearchResultsContainer\");\n$RefreshReg$(_c18, \"SearchResultsList\");\n$RefreshReg$(_c19, \"SearchResultItem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","styled","axios","io","useAuth","Navigation","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","user","navigate","unreadMessages","setUnreadMessages","conversations","setConversations","loading","setLoading","searchUsername","setSearchUsername","searchResults","setSearchResults","searching","setSearching","searchError","setSearchError","error","setError","socketRef","serverUrl","process","env","REACT_APP_API_URL","current","emit","id","disconnect","on","message","console","log","fetchUnreadMessages","audio","Audio","play","catch","e","off","data","get","success","formattedMessages","messageCounts","map","item","senderId","fetchConversations","handleSearch","preventDefault","trim","setTimeout","users","length","goToPrivateChat","userId","children","fileName","_jsxFileName","lineNumber","columnNumber","DashboardContainer","Header","CardsContainer","Card","CardFooter","to","Button","ErrorMessage","UnreadContainer","UnreadList","index","UnreadItem","onClick","username","UnreadBadge","count","ConversationsContainer","ConversationsList","convo","ConversationItem","Date","lastMessageTime","toLocaleString","SearchUserForm","onSubmit","type","placeholder","className","value","onChange","target","disabled","SearchButton","SearchError","SearchResultsContainer","SearchResultsList","result","SearchResultItem","isAdmin","_c","div","_c2","_c3","_c4","_c5","_c6","button","_c7","_c8","ul","_c9","li","_c0","span","_c1","_c10","_c11","_c12","form","_c13","_c14","_c15","_c16","_c17","_c18","_c19","$RefreshReg$"],"sources":["/home/orv/Documents/Projects/offline/offline/client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [unreadMessages, setUnreadMessages] = useState([]);\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchUsername, setSearchUsername] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searching, setSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n  const [error, setError] = useState('');\n  const socketRef = useRef();\n  \n  // Initialize socket connection\n  useEffect(() => {\n    if (!user) return;\n    \n    const serverUrl = process.env.REACT_APP_API_URL || '';\n    socketRef.current = io(serverUrl);\n    \n    // Connect user\n    socketRef.current.emit('user_connected', user.id);\n    \n    // Clean up socket connection on unmount\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [user]);\n  \n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !user) return;\n    \n    // Listen for private messages\n    socketRef.current.on('receive_private_message', (message) => {\n      console.log('Received private message in dashboard:', message);\n      // Refresh unread messages\n      fetchUnreadMessages();\n      // Add notification sound\n      const audio = new Audio('/notification.mp3');\n      audio.play().catch(e => console.log('Error playing notification sound:', e));\n    });\n    \n    return () => {\n      socketRef.current.off('receive_private_message');\n    };\n  }, [user]);\n  \n  // Fetch unread private messages\n  const fetchUnreadMessages = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      const { data } = await axios.get('/api/messages/private/unread');\n      if (data.success) {\n        console.log('Unread messages data:', data);\n        // Make sure each item has an id property\n        const formattedMessages = data.messageCounts.map(item => ({\n          ...item,\n          id: item.id || item.senderId // Use id if available, otherwise use senderId\n        }));\n        setUnreadMessages(formattedMessages);\n      }\n    } catch (error) {\n      console.error('Error fetching unread messages:', error);\n      setError('Error loading messages');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Fetch user's conversations\n  const fetchConversations = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      const { data } = await axios.get('/api/messages/private/conversations');\n      if (data.success) {\n        console.log('Conversations data:', data);\n        setConversations(data.conversations);\n      }\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n      // Don't show error for this as it's not critical\n    }\n  };\n  \n  // Fetch data on component mount\n  useEffect(() => {\n    if (!user) return;\n    \n    fetchUnreadMessages();\n    fetchConversations();\n  }, [user]);\n  \n  // Handle user search\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    \n    if (!searchUsername.trim()) {\n      setSearchError('Please enter a username');\n      setTimeout(() => setSearchError(''), 3000);\n      return;\n    }\n    \n    setSearching(true);\n    setSearchError('');\n    \n    try {\n      const { data } = await axios.get(`/api/users/search/${searchUsername}`);\n      \n      if (data.success) {\n        setSearchResults(data.users);\n        if (data.users.length === 0) {\n          setSearchError('No users found');\n          setTimeout(() => setSearchError(''), 3000);\n        }\n      }\n    } catch (error) {\n      console.error('Error searching users:', error);\n      setSearchError('Error searching users');\n      setTimeout(() => setSearchError(''), 3000);\n    } finally {\n      setSearching(false);\n    }\n  };\n  \n  // Navigate to private chat\n  const goToPrivateChat = (userId) => {\n    navigate(`/private-chat/${userId}`);\n  };\n  \n  if (!user) {\n    return <div>Please log in to view this page.</div>;\n  }\n  \n  return (\n    <>\n      <Navigation />\n      <DashboardContainer>\n        <Header>\n          <h1>User Dashboard</h1>\n          <p>Welcome to Orv Chat Platform</p>\n        </Header>\n        \n        <CardsContainer>\n          <Card>\n            <h2>Public Chatroom</h2>\n            <p>Chat with other users in the public chatroom. Your messages will be displayed after admin approval.</p>\n            <CardFooter>\n              <Link to=\"/chat\">\n                <Button>Enter Chatroom</Button>\n              </Link>\n            </CardFooter>\n          </Card>\n          \n          <Card>\n            <h2>Private Messages</h2>\n            <p>Chat privately with other users.</p>\n            {error && <ErrorMessage>{error}</ErrorMessage>}\n            {loading ? (\n              <p>Loading...</p>\n            ) : (\n              <>\n                {unreadMessages.length > 0 && (\n                  <UnreadContainer>\n                    <h3>Unread Messages:</h3>\n                    <UnreadList>\n                      {unreadMessages.map((item, index) => (\n                        <UnreadItem key={index}>\n                          <div onClick={() => goToPrivateChat(item.id)}>\n                            <span>{item.username}</span>\n                            <UnreadBadge>{item.count}</UnreadBadge>\n                          </div>\n                        </UnreadItem>\n                      ))}\n                    </UnreadList>\n                  </UnreadContainer>\n                )}\n                \n                {conversations.length > 0 && (\n                  <ConversationsContainer>\n                    <h3>Recent Conversations:</h3>\n                    <ConversationsList>\n                      {conversations.map((convo) => (\n                        <ConversationItem key={convo.userId}>\n                          <div onClick={() => goToPrivateChat(convo.userId)}>\n                            <span>{convo.username}</span>\n                            <small>{new Date(convo.lastMessageTime).toLocaleString()}</small>\n                          </div>\n                        </ConversationItem>\n                      ))}\n                    </ConversationsList>\n                  </ConversationsContainer>\n                )}\n                \n                {unreadMessages.length === 0 && conversations.length === 0 && (\n                  <p>No messages. Start a conversation!</p>\n                )}\n              </>\n            )}\n            <CardFooter>\n              <SearchUserForm onSubmit={handleSearch}>\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter username...\"\n                  className=\"form-control\"\n                  value={searchUsername}\n                  onChange={(e) => setSearchUsername(e.target.value)}\n                  disabled={searching}\n                />\n                <SearchButton type=\"submit\" disabled={searching}>\n                  {searching ? 'Searching...' : 'Search'}\n                </SearchButton>\n              </SearchUserForm>\n              \n              {searchError && <SearchError>{searchError}</SearchError>}\n              \n              {searchResults.length > 0 && (\n                <SearchResultsContainer>\n                  <h3>Search Results:</h3>\n                  <SearchResultsList>\n                    {searchResults.map((result) => (\n                      <SearchResultItem key={result.id}>\n                        <div onClick={() => goToPrivateChat(result.id)}>\n                          <span>{result.username}</span>\n                          <small>{result.isAdmin ? '(Admin)' : ''}</small>\n                        </div>\n                      </SearchResultItem>\n                    ))}\n                  </SearchResultsList>\n                </SearchResultsContainer>\n              )}\n            </CardFooter>\n          </Card>\n          \n          {user.isAdmin && (\n            <Card>\n              <h2>Admin Panel</h2>\n              <p>Manage messages, approve or reject user messages, and manage users.</p>\n              <CardFooter>\n                <Link to=\"/admin\">\n                  <Button>Enter Admin Panel</Button>\n                </Link>\n              </CardFooter>\n            </Card>\n          )}\n        </CardsContainer>\n      </DashboardContainer>\n    </>\n  );\n};\n\nconst DashboardContainer = styled.div`\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst Header = styled.div`\n  text-align: center;\n  margin-bottom: 2rem;\n  \n  h1 {\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n  }\n`;\n\nconst CardsContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 2rem;\n`;\n\nconst Card = styled.div`\n  background-color: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px var(--shadow-color);\n  padding: 1.5rem;\n  \n  h2 {\n    color: var(--accent-color);\n    margin-bottom: 1rem;\n    font-size: 1.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n    margin-bottom: 1.5rem;\n  }\n`;\n\nconst CardFooter = styled.div`\n  margin-top: 1.5rem;\n  text-align: center;\n`;\n\nconst Button = styled.button`\n  background-color: var(--accent-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.75rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  \n  &:hover {\n    background-color: var(--accent-hover);\n  }\n`;\n\nconst UnreadContainer = styled.div`\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n\nconst UnreadList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst UnreadItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    text-decoration: none;\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n  }\n`;\n\nconst UnreadBadge = styled.span`\n  background-color: var(--danger-color);\n  color: white;\n  font-size: 0.8rem;\n  padding: 0.2rem 0.5rem;\n  border-radius: 50%;\n  min-width: 1.5rem;\n  text-align: center;\n`;\n\nconst ConversationsContainer = styled.div`\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n\nconst ConversationsList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst ConversationItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n    \n    small {\n      color: var(--text-secondary);\n      font-size: 0.7rem;\n    }\n  }\n`;\n\nconst SearchUserForm = styled.form`\n  display: flex;\n  gap: 0.5rem;\n`;\n\nconst SearchButton = styled.button`\n  background-color: var(--accent-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  \n  &:hover {\n    background-color: var(--accent-hover);\n  }\n  \n  &:disabled {\n    background-color: #555;\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;\n\nconst SearchError = styled.div`\n  color: var(--danger-color);\n  font-size: 0.9rem;\n  margin-top: 0.5rem;\n`;\n\nconst ErrorMessage = styled.div`\n  color: var(--danger-color);\n  font-size: 0.9rem;\n  margin: 0.5rem 0;\n  padding: 0.5rem;\n  background-color: rgba(231, 76, 60, 0.1);\n  border-radius: 4px;\n  text-align: center;\n`;\n\nconst SearchResultsContainer = styled.div`\n  margin-top: 1rem;\n  text-align: left;\n  \n  h3 {\n    font-size: 1rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.5rem;\n  }\n`;\n\nconst SearchResultsList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst SearchResultItem = styled.li`\n  margin-bottom: 0.5rem;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: var(--bg-tertiary);\n    color: var(--text-primary);\n    cursor: pointer;\n    \n    &:hover {\n      background-color: var(--bg-primary);\n    }\n    \n    small {\n      color: var(--accent-color);\n      font-size: 0.8rem;\n    }\n  }\n`;\n\nexport default Dashboard; "],"mappings":"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G1E,MAAM,CAAC+G,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACI,GAAA,GAhBIzC,IAAI;AAkBV,MAAMC,UAAU,GAAG3E,MAAM,CAAC+G,GAAG;AAC7B;AACA;AACA,CAAC;AAACK,GAAA,GAHIzC,UAAU;AAKhB,MAAME,MAAM,GAAG7E,MAAM,CAACqH,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAbIzC,MAAM;AAeZ,MAAME,eAAe,GAAG/E,MAAM,CAAC+G,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACQ,GAAA,GARIxC,eAAe;AAUrB,MAAMC,UAAU,GAAGhF,MAAM,CAACwH,EAAE;AAC5B;AACA;AACA,CAAC;AAACC,GAAA,GAHIzC,UAAU;AAKhB,MAAME,UAAU,GAAGlF,MAAM,CAAC0H,EAAE;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAlBIzC,UAAU;AAoBhB,MAAMG,WAAW,GAAGrF,MAAM,CAAC4H,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GARIxC,WAAW;AAUjB,MAAME,sBAAsB,GAAGvF,MAAM,CAAC+G,GAAG;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACe,IAAA,GARIvC,sBAAsB;AAU5B,MAAMC,iBAAiB,GAAGxF,MAAM,CAACwH,EAAE;AACnC;AACA;AACA,CAAC;AAACO,IAAA,GAHIvC,iBAAiB;AAKvB,MAAME,gBAAgB,GAAG1F,MAAM,CAAC0H,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACM,IAAA,GAtBItC,gBAAgB;AAwBtB,MAAMI,cAAc,GAAG9F,MAAM,CAACiI,IAAI;AAClC;AACA;AACA,CAAC;AAACC,IAAA,GAHIpC,cAAc;AAKpB,MAAMS,YAAY,GAAGvG,MAAM,CAACqH,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACc,IAAA,GAlBI5B,YAAY;AAoBlB,MAAMC,WAAW,GAAGxG,MAAM,CAAC+G,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAACqB,IAAA,GAJI5B,WAAW;AAMjB,MAAM1B,YAAY,GAAG9E,MAAM,CAAC+G,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsB,IAAA,GARIvD,YAAY;AAUlB,MAAM2B,sBAAsB,GAAGzG,MAAM,CAAC+G,GAAG;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuB,IAAA,GATI7B,sBAAsB;AAW5B,MAAMC,iBAAiB,GAAG1G,MAAM,CAACwH,EAAE;AACnC;AACA;AACA,CAAC;AAACe,IAAA,GAHI7B,iBAAiB;AAKvB,MAAME,gBAAgB,GAAG5G,MAAM,CAAC0H,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACc,IAAA,GAtBI5B,gBAAgB;AAwBtB,eAAenG,SAAS;AAAC,IAAAqG,EAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAE,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA;AAAAC,YAAA,CAAA3B,EAAA;AAAA2B,YAAA,CAAAzB,GAAA;AAAAyB,YAAA,CAAAxB,GAAA;AAAAwB,YAAA,CAAAvB,GAAA;AAAAuB,YAAA,CAAAtB,GAAA;AAAAsB,YAAA,CAAArB,GAAA;AAAAqB,YAAA,CAAAnB,GAAA;AAAAmB,YAAA,CAAAlB,GAAA;AAAAkB,YAAA,CAAAhB,GAAA;AAAAgB,YAAA,CAAAd,GAAA;AAAAc,YAAA,CAAAZ,GAAA;AAAAY,YAAA,CAAAX,IAAA;AAAAW,YAAA,CAAAV,IAAA;AAAAU,YAAA,CAAAT,IAAA;AAAAS,YAAA,CAAAP,IAAA;AAAAO,YAAA,CAAAN,IAAA;AAAAM,YAAA,CAAAL,IAAA;AAAAK,YAAA,CAAAJ,IAAA;AAAAI,YAAA,CAAAH,IAAA;AAAAG,YAAA,CAAAF,IAAA;AAAAE,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}