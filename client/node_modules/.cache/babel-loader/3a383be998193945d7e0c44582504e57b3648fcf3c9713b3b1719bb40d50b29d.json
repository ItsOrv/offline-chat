{"ast":null,"code":"var _jsxFileName = \"/home/orv/Documents/Projects/offline/offline/client/src/pages/PrivateChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PrivateChat = () => {\n  _s();\n  const {\n    userId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [recipientUser, setRecipientUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const socketRef = useRef();\n  const messagesEndRef = useRef(null);\n\n  // Scroll to the bottom of messages\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // Initialize socket connection and fetch messages\n  useEffect(() => {\n    const serverUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    socketRef.current = io(serverUrl);\n\n    // Connect user\n    socketRef.current.emit('user_connected', user._id);\n\n    // Fetch user info and messages\n    const fetchData = async () => {\n      try {\n        // Fetch recipient user info\n        const userResponse = await axios.get(`/api/users/${userId}`);\n        if (userResponse.data.success) {\n          setRecipientUser(userResponse.data.user);\n\n          // Fetch messages between current user and recipient\n          const messagesResponse = await axios.get(`/api/messages/private/${userId}`);\n          if (messagesResponse.data.success) {\n            setMessages(messagesResponse.data.messages);\n          }\n        } else {\n          setError('User not found');\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Error loading data');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n\n    // Cleanup socket connection\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [userId, user._id]);\n\n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current) return;\n\n    // Listen for private messages\n    socketRef.current.on('receive_private_message', message => {\n      // Only add message if it's from the current chat\n      if (message.sender._id === userId && message.recipient._id === user._id || message.sender._id === user._id && message.recipient._id === userId) {\n        setMessages(prevMessages => [...prevMessages, message]);\n      }\n    });\n\n    // Confirmation that message was sent\n    socketRef.current.on('private_message_sent', messageId => {\n      console.log('Private message sent:', messageId);\n    });\n  }, [userId, user._id]);\n\n  // Scroll to bottom when messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Send a new message\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n\n    // Send message through socket\n    socketRef.current.emit('send_private_message', {\n      sender: user._id,\n      recipient: userId,\n      content: newMessage.trim()\n    });\n\n    // Optimistically add message to UI\n    const optimisticMessage = {\n      _id: Date.now().toString(),\n      // Temporary ID\n      sender: {\n        _id: user._id,\n        username: user.username\n      },\n      recipient: {\n        _id: userId,\n        username: (recipientUser === null || recipientUser === void 0 ? void 0 : recipientUser.username) || 'User'\n      },\n      content: newMessage.trim(),\n      createdAt: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, optimisticMessage]);\n\n    // Clear input\n    setNewMessage('');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatContainer, {\n      children: [/*#__PURE__*/_jsxDEV(ChatHeader, {\n        children: [/*#__PURE__*/_jsxDEV(BackLink, {\n          to: \"/\",\n          children: \"\\xAB Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this) : error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Chat with \", recipientUser === null || recipientUser === void 0 ? void 0 : recipientUser.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MessagesContainer, {\n        children: [loading ? /*#__PURE__*/_jsxDEV(LoadingMessage, {\n          children: \"Loading messages...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this) : error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyMessage, {\n          children: \"No messages yet. Start the conversation!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this) : messages.map(message => /*#__PURE__*/_jsxDEV(MessageBubble, {\n          isOwnMessage: message.sender._id === user._id,\n          children: [/*#__PURE__*/_jsxDEV(MessageContent, {\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(MessageTime, {\n            children: new Date(message.createdAt).toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this)]\n        }, message._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MessageForm, {\n        onSubmit: sendMessage,\n        children: [/*#__PURE__*/_jsxDEV(MessageInput, {\n          type: \"text\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          placeholder: \"Type your message...\",\n          disabled: loading || !!error,\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n          type: \"submit\",\n          disabled: loading || !!error,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(PrivateChat, \"KusNaVJxgUi519DvV/lOmLWevHQ=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = PrivateChat;\nconst ChatContainer = styled.div`\n  max-width: 900px;\n  margin: 0 auto;\n  height: calc(100vh - 60px);\n  display: flex;\n  flex-direction: column;\n`;\n_c2 = ChatContainer;\nconst ChatHeader = styled.div`\n  padding: 1.5rem;\n  background-color: #fff;\n  border-bottom: 1px solid #e4e4e4;\n  \n  h2 {\n    margin: 0.5rem 0;\n    color: #2c3e50;\n    text-align: center;\n  }\n`;\n_c3 = ChatHeader;\nconst BackLink = styled(Link)`\n  display: block;\n  margin-bottom: 1rem;\n  color: #3498db;\n  \n  &:hover {\n    text-decoration: underline;\n  }\n`;\n_c4 = BackLink;\nconst MessagesContainer = styled.div`\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  background-color: #f8f9fa;\n`;\n_c5 = MessagesContainer;\nconst LoadingMessage = styled.div`\n  text-align: center;\n  color: #7f8c8d;\n  margin: 2rem 0;\n`;\n_c6 = LoadingMessage;\nconst EmptyMessage = styled.div`\n  text-align: center;\n  color: #7f8c8d;\n  margin: 2rem 0;\n`;\n_c7 = EmptyMessage;\nconst ErrorMessage = styled.div`\n  text-align: center;\n  color: #e74c3c;\n  font-weight: 500;\n  margin: 1rem 0;\n`;\n_c8 = ErrorMessage;\nconst MessageBubble = styled.div`\n  max-width: 70%;\n  padding: 1rem;\n  border-radius: 8px;\n  background-color: ${props => props.isOwnMessage ? '#3498db' : '#fff'};\n  color: ${props => props.isOwnMessage ? '#fff' : '#333'};\n  align-self: ${props => props.isOwnMessage ? 'flex-end' : 'flex-start'};\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  position: relative;\n`;\n_c9 = MessageBubble;\nconst MessageContent = styled.p`\n  margin-bottom: 0.5rem;\n  word-break: break-word;\n`;\n_c0 = MessageContent;\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  text-align: left;\n`;\n_c1 = MessageTime;\nconst MessageForm = styled.form`\n  display: flex;\n  padding: 1rem;\n  background-color: #fff;\n  border-top: 1px solid #e4e4e4;\n`;\n_c10 = MessageForm;\nconst MessageInput = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: 1px solid #ddd;\n  border-radius: 4px 0 0 4px;\n  font-size: 1rem;\n  \n  &:focus {\n    outline: none;\n    border-color: #3498db;\n  }\n  \n  &:disabled {\n    background-color: #f8f9fa;\n    cursor: not-allowed;\n  }\n`;\n_c11 = MessageInput;\nconst SendButton = styled.button`\n  background-color: #3498db;\n  color: white;\n  border: none;\n  border-radius: 0 4px 4px 0;\n  padding: 0 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  \n  &:hover:not(:disabled) {\n    background-color: #2980b9;\n  }\n  \n  &:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n`;\n_c12 = SendButton;\nexport default PrivateChat;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12;\n$RefreshReg$(_c, \"PrivateChat\");\n$RefreshReg$(_c2, \"ChatContainer\");\n$RefreshReg$(_c3, \"ChatHeader\");\n$RefreshReg$(_c4, \"BackLink\");\n$RefreshReg$(_c5, \"MessagesContainer\");\n$RefreshReg$(_c6, \"LoadingMessage\");\n$RefreshReg$(_c7, \"EmptyMessage\");\n$RefreshReg$(_c8, \"ErrorMessage\");\n$RefreshReg$(_c9, \"MessageBubble\");\n$RefreshReg$(_c0, \"MessageContent\");\n$RefreshReg$(_c1, \"MessageTime\");\n$RefreshReg$(_c10, \"MessageForm\");\n$RefreshReg$(_c11, \"MessageInput\");\n$RefreshReg$(_c12, \"SendButton\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Link","styled","axios","io","useAuth","Navigation","jsxDEV","_jsxDEV","Fragment","_Fragment","PrivateChat","_s","userId","user","recipientUser","setRecipientUser","messages","setMessages","newMessage","setNewMessage","loading","setLoading","error","setError","socketRef","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","serverUrl","process","env","REACT_APP_API_URL","emit","_id","fetchData","userResponse","get","data","success","messagesResponse","console","disconnect","on","message","sender","recipient","prevMessages","messageId","log","sendMessage","e","preventDefault","trim","content","optimisticMessage","Date","now","toString","username","createdAt","toISOString","prev","children","fileName","_jsxFileName","lineNumber","columnNumber","ChatContainer","ChatHeader","BackLink","to","ErrorMessage","MessagesContainer","LoadingMessage","length","EmptyMessage","map","MessageBubble","isOwnMessage","MessageContent","MessageTime","toLocaleTimeString","ref","MessageForm","onSubmit","MessageInput","type","value","onChange","target","placeholder","disabled","autoFocus","SendButton","_c","div","_c2","_c3","_c4","_c5","_c6","_c7","_c8","props","_c9","p","_c0","_c1","form","_c10","input","_c11","button","_c12","$RefreshReg$"],"sources":["/home/orv/Documents/Projects/offline/offline/client/src/pages/PrivateChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\n\nconst PrivateChat = () => {\n  const { userId } = useParams();\n  const { user } = useAuth();\n  \n  const [recipientUser, setRecipientUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  const socketRef = useRef();\n  const messagesEndRef = useRef(null);\n  \n  // Scroll to the bottom of messages\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n  \n  // Initialize socket connection and fetch messages\n  useEffect(() => {\n    const serverUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    socketRef.current = io(serverUrl);\n    \n    // Connect user\n    socketRef.current.emit('user_connected', user._id);\n    \n    // Fetch user info and messages\n    const fetchData = async () => {\n      try {\n        // Fetch recipient user info\n        const userResponse = await axios.get(`/api/users/${userId}`);\n        \n        if (userResponse.data.success) {\n          setRecipientUser(userResponse.data.user);\n          \n          // Fetch messages between current user and recipient\n          const messagesResponse = await axios.get(`/api/messages/private/${userId}`);\n          \n          if (messagesResponse.data.success) {\n            setMessages(messagesResponse.data.messages);\n          }\n        } else {\n          setError('User not found');\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Error loading data');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n    \n    // Cleanup socket connection\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [userId, user._id]);\n  \n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current) return;\n    \n    // Listen for private messages\n    socketRef.current.on('receive_private_message', (message) => {\n      // Only add message if it's from the current chat\n      if (\n        (message.sender._id === userId && message.recipient._id === user._id) ||\n        (message.sender._id === user._id && message.recipient._id === userId)\n      ) {\n        setMessages((prevMessages) => [...prevMessages, message]);\n      }\n    });\n    \n    // Confirmation that message was sent\n    socketRef.current.on('private_message_sent', (messageId) => {\n      console.log('Private message sent:', messageId);\n    });\n    \n  }, [userId, user._id]);\n  \n  // Scroll to bottom when messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  \n  // Send a new message\n  const sendMessage = (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim()) return;\n    \n    // Send message through socket\n    socketRef.current.emit('send_private_message', {\n      sender: user._id,\n      recipient: userId,\n      content: newMessage.trim(),\n    });\n    \n    // Optimistically add message to UI\n    const optimisticMessage = {\n      _id: Date.now().toString(), // Temporary ID\n      sender: {\n        _id: user._id,\n        username: user.username,\n      },\n      recipient: {\n        _id: userId,\n        username: recipientUser?.username || 'User',\n      },\n      content: newMessage.trim(),\n      createdAt: new Date().toISOString(),\n    };\n    \n    setMessages((prev) => [...prev, optimisticMessage]);\n    \n    // Clear input\n    setNewMessage('');\n  };\n  \n  return (\n    <>\n      <Navigation />\n      <ChatContainer>\n        <ChatHeader>\n          <BackLink to=\"/\">Â« Back to Dashboard</BackLink>\n          {loading ? (\n            <div>Loading...</div>\n          ) : error ? (\n            <ErrorMessage>{error}</ErrorMessage>\n          ) : (\n            <>\n              <h2>Chat with {recipientUser?.username}</h2>\n            </>\n          )}\n        </ChatHeader>\n        \n        <MessagesContainer>\n          {loading ? (\n            <LoadingMessage>Loading messages...</LoadingMessage>\n          ) : error ? (\n            <ErrorMessage>{error}</ErrorMessage>\n          ) : messages.length === 0 ? (\n            <EmptyMessage>No messages yet. Start the conversation!</EmptyMessage>\n          ) : (\n            messages.map((message) => (\n              <MessageBubble\n                key={message._id}\n                isOwnMessage={message.sender._id === user._id}\n              >\n                <MessageContent>{message.content}</MessageContent>\n                <MessageTime>\n                  {new Date(message.createdAt).toLocaleTimeString()}\n                </MessageTime>\n              </MessageBubble>\n            ))\n          )}\n          <div ref={messagesEndRef} />\n        </MessagesContainer>\n        \n        <MessageForm onSubmit={sendMessage}>\n          <MessageInput\n            type=\"text\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            placeholder=\"Type your message...\"\n            disabled={loading || !!error}\n            autoFocus\n          />\n          <SendButton type=\"submit\" disabled={loading || !!error}>\n            Send\n          </SendButton>\n        </MessageForm>\n      </ChatContainer>\n    </>\n  );\n};\n\nconst ChatContainer = styled.div`\n  max-width: 900px;\n  margin: 0 auto;\n  height: calc(100vh - 60px);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ChatHeader = styled.div`\n  padding: 1.5rem;\n  background-color: #fff;\n  border-bottom: 1px solid #e4e4e4;\n  \n  h2 {\n    margin: 0.5rem 0;\n    color: #2c3e50;\n    text-align: center;\n  }\n`;\n\nconst BackLink = styled(Link)`\n  display: block;\n  margin-bottom: 1rem;\n  color: #3498db;\n  \n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst MessagesContainer = styled.div`\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  background-color: #f8f9fa;\n`;\n\nconst LoadingMessage = styled.div`\n  text-align: center;\n  color: #7f8c8d;\n  margin: 2rem 0;\n`;\n\nconst EmptyMessage = styled.div`\n  text-align: center;\n  color: #7f8c8d;\n  margin: 2rem 0;\n`;\n\nconst ErrorMessage = styled.div`\n  text-align: center;\n  color: #e74c3c;\n  font-weight: 500;\n  margin: 1rem 0;\n`;\n\nconst MessageBubble = styled.div`\n  max-width: 70%;\n  padding: 1rem;\n  border-radius: 8px;\n  background-color: ${(props) => (props.isOwnMessage ? '#3498db' : '#fff')};\n  color: ${(props) => (props.isOwnMessage ? '#fff' : '#333')};\n  align-self: ${(props) => (props.isOwnMessage ? 'flex-end' : 'flex-start')};\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  position: relative;\n`;\n\nconst MessageContent = styled.p`\n  margin-bottom: 0.5rem;\n  word-break: break-word;\n`;\n\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  text-align: left;\n`;\n\nconst MessageForm = styled.form`\n  display: flex;\n  padding: 1rem;\n  background-color: #fff;\n  border-top: 1px solid #e4e4e4;\n`;\n\nconst MessageInput = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: 1px solid #ddd;\n  border-radius: 4px 0 0 4px;\n  font-size: 1rem;\n  \n  &:focus {\n    outline: none;\n    border-color: #3498db;\n  }\n  \n  &:disabled {\n    background-color: #f8f9fa;\n    cursor: not-allowed;\n  }\n`;\n\nconst SendButton = styled.button`\n  background-color: #3498db;\n  color: white;\n  border: none;\n  border-radius: 0 4px 4px 0;\n  padding: 0 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  \n  &:hover:not(:disabled) {\n    background-color: #2980b9;\n  }\n  \n  &:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n`;\n\nexport default PrivateChat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}