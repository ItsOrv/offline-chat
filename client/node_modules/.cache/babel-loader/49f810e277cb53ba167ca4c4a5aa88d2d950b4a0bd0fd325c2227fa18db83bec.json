{"ast":null,"code":"var _jsxFileName = \"/home/orv/Documents/Projects/offline/offline/client/src/pages/AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [activeTab, setActiveTab] = useState('messages');\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const socketRef = useRef();\n\n  // Initialize socket connection\n  useEffect(() => {\n    if (!user || !user.isAdmin) return;\n    const serverUrl = process.env.REACT_APP_API_URL || '';\n    socketRef.current = io(serverUrl);\n\n    // Connect user\n    socketRef.current.emit('user_connected', user.id);\n\n    // Cleanup socket connection\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [user]);\n\n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !user || !user.isAdmin) return;\n\n    // Listen for new pending messages\n    socketRef.current.on('pending_approval', message => {\n      console.log('New message pending approval:', message);\n      setPendingMessages(prev => [...prev, message]);\n    });\n\n    // Listen for message rejections\n    socketRef.current.on('message_rejected', messageId => {\n      setPendingMessages(prev => prev.filter(msg => msg.id !== messageId && msg._id !== messageId));\n    });\n\n    // Listen for message approvals\n    socketRef.current.on('approved_message', message => {\n      setPendingMessages(prev => prev.filter(msg => msg.id !== message.id && msg._id !== message._id));\n    });\n    return () => {\n      socketRef.current.off('pending_approval');\n      socketRef.current.off('message_rejected');\n      socketRef.current.off('approved_message');\n    };\n  }, [user]);\n\n  // Fetch pending messages and users\n  useEffect(() => {\n    if (!user || !user.isAdmin) return;\n    const fetchData = async () => {\n      try {\n        // Fetch pending messages\n        const messagesResponse = await axios.get('/api/messages/pending');\n        if (messagesResponse.data.success) {\n          setPendingMessages(messagesResponse.data.messages);\n        }\n\n        // Fetch users\n        const usersResponse = await axios.get('/api/users');\n        if (usersResponse.data.success) {\n          setUsers(usersResponse.data.users);\n        }\n      } catch (error) {\n        console.error('Error fetching admin data:', error);\n        setError('Error loading data');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [user]);\n\n  // Handle approving a message\n  const handleApproveMessage = async messageId => {\n    if (!socketRef.current) return;\n    try {\n      // First try the socket approach (real-time)\n      socketRef.current.emit('approve_message', messageId);\n\n      // Also make the API call as a fallback\n      const response = await axios.put(`/api/messages/${messageId}/approve`);\n      if (response.data.success) {\n        // Remove from pending messages\n        setPendingMessages(prev => prev.filter(msg => msg.id !== messageId && msg._id !== messageId));\n      }\n    } catch (error) {\n      console.error('Error approving message:', error);\n    }\n  };\n\n  // Handle deleting a message\n  const handleDeleteMessage = async messageId => {\n    if (!socketRef.current) return;\n    try {\n      // First try the socket approach (real-time)\n      socketRef.current.emit('reject_message', messageId);\n\n      // Also make the API call as a fallback\n      const response = await axios.delete(`/api/messages/${messageId}`);\n      if (response.data.success) {\n        // Remove from pending messages\n        setPendingMessages(prev => prev.filter(msg => msg.id !== messageId && msg._id !== messageId));\n      }\n    } catch (error) {\n      console.error('Error deleting message:', error);\n    }\n  };\n\n  // Handle promoting/demoting user admin status\n  const handleToggleAdmin = async (userId, isAdmin) => {\n    try {\n      const response = await axios.put(`/api/users/${userId}`, {\n        isAdmin: !isAdmin\n      });\n      if (response.data.success) {\n        // Update users list with new admin status\n        setUsers(prev => prev.map(u => u.id === userId ? {\n          ...u,\n          isAdmin: !isAdmin\n        } : u));\n      }\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n  if (!user || !user.isAdmin) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AdminContainer, {\n        children: /*#__PURE__*/_jsxDEV(AdminHeader, {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Access Denied\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You need admin privileges to view this page.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AdminContainer, {\n      children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Admin Panel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Manage messages and users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabsContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          active: activeTab === 'messages',\n          onClick: () => setActiveTab('messages'),\n          children: [\"Pending Messages \", pendingMessages.length > 0 && /*#__PURE__*/_jsxDEV(Badge, {\n            children: pendingMessages.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 61\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          active: activeTab === 'users',\n          onClick: () => setActiveTab('users'),\n          children: \"User Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingMessage, {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [activeTab === 'messages' && /*#__PURE__*/_jsxDEV(ContentSection, {\n          children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Messages Awaiting Approval\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this), pendingMessages.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyMessage, {\n            children: \"No messages awaiting approval.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(MessageList, {\n            children: pendingMessages.map(message => {\n              var _message$sender;\n              return /*#__PURE__*/_jsxDEV(MessageItem, {\n                children: [/*#__PURE__*/_jsxDEV(MessageInfo, {\n                  children: [/*#__PURE__*/_jsxDEV(MessageSender, {\n                    children: ((_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.username) || 'User'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(MessageDate, {\n                    children: new Date(message.createdAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(MessageContent, {\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(MessageActions, {\n                  children: [/*#__PURE__*/_jsxDEV(ApproveButton, {\n                    onClick: () => handleApproveMessage(message.id || message._id),\n                    children: \"Approve\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(RejectButton, {\n                    onClick: () => handleDeleteMessage(message.id || message._id),\n                    children: \"Reject\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 25\n                }, this)]\n              }, message.id || message._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), activeTab === 'users' && /*#__PURE__*/_jsxDEV(ContentSection, {\n          children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"User Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 17\n          }, this), users.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyMessage, {\n            children: \"No users found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Last Seen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: users.map(u => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: u.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: u.isAdmin ? /*#__PURE__*/_jsxDEV(AdminBadge, {\n                    children: \"Admin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 31\n                  }, this) : /*#__PURE__*/_jsxDEV(UserBadge, {\n                    children: \"Regular User\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: new Date(u.lastSeen).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: u.id !== user.id && /*#__PURE__*/_jsxDEV(ActionButton, {\n                    isAdmin: u.isAdmin,\n                    onClick: () => handleToggleAdmin(u.id, u.isAdmin),\n                    children: u.isAdmin ? 'Remove Admin' : 'Make Admin'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 27\n                }, this)]\n              }, u.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AdminDashboard, \"oQFGca0w9okluGp6pGKHUDc5EiM=\", false, function () {\n  return [useAuth];\n});\n_c = AdminDashboard;\nconst AdminContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem;\n`;\n_c2 = AdminContainer;\nconst AdminHeader = styled.div`\n  text-align: center;\n  margin-bottom: 2rem;\n  \n  h1 {\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n  }\n`;\n_c3 = AdminHeader;\nconst TabsContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  border-bottom: 1px solid var(--border-color);\n`;\n_c4 = TabsContainer;\nconst Tab = styled.button`\n  padding: 0.8rem 1.5rem;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 1rem;\n  color: ${props => props.active ? 'var(--accent-color)' : 'var(--text-secondary)'};\n  border-bottom: ${props => props.active ? '3px solid var(--accent-color)' : 'none'};\n  margin-bottom: -1px;\n  position: relative;\n  \n  &:hover {\n    color: var(--accent-color);\n  }\n`;\n_c5 = Tab;\nconst Badge = styled.span`\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: var(--danger-color);\n  color: white;\n  font-size: 0.7rem;\n  padding: 0.1rem 0.4rem;\n  border-radius: 50%;\n  min-width: 1rem;\n  text-align: center;\n`;\n_c6 = Badge;\nconst ContentSection = styled.div`\n  background-color: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px var(--shadow-color);\n  padding: 2rem;\n`;\n_c7 = ContentSection;\nconst SectionTitle = styled.h2`\n  color: var(--text-primary);\n  margin-bottom: 1.5rem;\n  font-size: 1.3rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 1px solid var(--border-color);\n`;\n_c8 = SectionTitle;\nconst LoadingMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n  font-size: 1.1rem;\n`;\n_c9 = LoadingMessage;\nconst ErrorMessage = styled.div`\n  text-align: center;\n  color: var(--danger-color);\n  margin: 2rem 0;\n  font-weight: 500;\n`;\n_c0 = ErrorMessage;\nconst EmptyMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n`;\n_c1 = EmptyMessage;\nconst MessageList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n_c10 = MessageList;\nconst MessageItem = styled.div`\n  padding: 1.5rem;\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  background-color: var(--bg-tertiary);\n`;\n_c11 = MessageItem;\nconst MessageInfo = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n`;\n_c12 = MessageInfo;\nconst MessageSender = styled.div`\n  font-weight: 500;\n  color: var(--text-primary);\n`;\n_c13 = MessageSender;\nconst MessageDate = styled.div`\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n`;\n_c14 = MessageDate;\nconst MessageContent = styled.div`\n  margin-bottom: 1.5rem;\n  background-color: var(--bg-primary);\n  padding: 1rem;\n  border-radius: 4px;\n  word-break: break-word;\n  color: var(--text-secondary);\n`;\n_c15 = MessageContent;\nconst MessageActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n`;\n_c16 = MessageActions;\nconst ApproveButton = styled.button`\n  background-color: var(--success-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.6rem 1.2rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #27ae60;\n  }\n`;\n_c17 = ApproveButton;\nconst RejectButton = styled.button`\n  background-color: var(--danger-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.6rem 1.2rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #c0392b;\n  }\n`;\n_c18 = RejectButton;\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  \n  th, td {\n    padding: 1rem;\n    text-align: left;\n    border-bottom: 1px solid var(--border-color);\n  }\n  \n  th {\n    color: var(--text-primary);\n    font-weight: 500;\n  }\n  \n  td {\n    color: var(--text-secondary);\n  }\n  \n  tbody tr:hover {\n    background-color: var(--bg-tertiary);\n  }\n`;\n_c19 = Table;\nconst AdminBadge = styled.span`\n  background-color: var(--danger-color);\n  color: var(--text-primary);\n  padding: 0.3rem 0.6rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n`;\n_c20 = AdminBadge;\nconst UserBadge = styled.span`\n  background-color: var(--bg-tertiary);\n  color: var(--text-secondary);\n  padding: 0.3rem 0.6rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n`;\n_c21 = UserBadge;\nconst ActionButton = styled.button`\n  background-color: ${props => props.isAdmin ? 'var(--danger-color)' : 'var(--accent-color)'};\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: ${props => props.isAdmin ? '#c0392b' : 'var(--accent-hover)'};\n  }\n`;\n_c22 = ActionButton;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22;\n$RefreshReg$(_c, \"AdminDashboard\");\n$RefreshReg$(_c2, \"AdminContainer\");\n$RefreshReg$(_c3, \"AdminHeader\");\n$RefreshReg$(_c4, \"TabsContainer\");\n$RefreshReg$(_c5, \"Tab\");\n$RefreshReg$(_c6, \"Badge\");\n$RefreshReg$(_c7, \"ContentSection\");\n$RefreshReg$(_c8, \"SectionTitle\");\n$RefreshReg$(_c9, \"LoadingMessage\");\n$RefreshReg$(_c0, \"ErrorMessage\");\n$RefreshReg$(_c1, \"EmptyMessage\");\n$RefreshReg$(_c10, \"MessageList\");\n$RefreshReg$(_c11, \"MessageItem\");\n$RefreshReg$(_c12, \"MessageInfo\");\n$RefreshReg$(_c13, \"MessageSender\");\n$RefreshReg$(_c14, \"MessageDate\");\n$RefreshReg$(_c15, \"MessageContent\");\n$RefreshReg$(_c16, \"MessageActions\");\n$RefreshReg$(_c17, \"ApproveButton\");\n$RefreshReg$(_c18, \"RejectButton\");\n$RefreshReg$(_c19, \"Table\");\n$RefreshReg$(_c20, \"AdminBadge\");\n$RefreshReg$(_c21, \"UserBadge\");\n$RefreshReg$(_c22, \"ActionButton\");","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","axios","io","useAuth","Navigation","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","_s","user","activeTab","setActiveTab","pendingMessages","setPendingMessages","users","setUsers","loading","setLoading","error","setError","socketRef","isAdmin","serverUrl","process","env","REACT_APP_API_URL","current","emit","id","disconnect","on","message","console","log","prev","messageId","filter","msg","_id","off","fetchData","messagesResponse","get","data","success","messages","usersResponse","handleApproveMessage","response","put","handleDeleteMessage","delete","handleToggleAdmin","userId","map","u","children","fileName","_jsxFileName","lineNumber","columnNumber","AdminContainer","AdminHeader","TabsContainer","Tab","active","onClick","length","Badge","LoadingMessage","ErrorMessage","ContentSection","SectionTitle","EmptyMessage","MessageList","_message$sender","MessageItem","MessageInfo","MessageSender","sender","username","MessageDate","Date","createdAt","toLocaleString","MessageContent","content","MessageActions","ApproveButton","RejectButton","Table","AdminBadge","UserBadge","lastSeen","ActionButton","_c","div","_c2","_c3","_c4","button","props","_c5","span","_c6","_c7","h2","_c8","_c9","_c0","_c1","_c10","_c11","_c12","_c13","_c14","_c15","_c16","_c17","_c18","table","_c19","_c20","_c21","_c22","$RefreshReg$"],"sources":["/home/orv/Documents/Projects/offline/offline/client/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\n\nconst AdminDashboard = () => {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('messages');\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const socketRef = useRef();\n  \n  // Initialize socket connection\n  useEffect(() => {\n    if (!user || !user.isAdmin) return;\n    \n    const serverUrl = process.env.REACT_APP_API_URL || '';\n    socketRef.current = io(serverUrl);\n    \n    // Connect user\n    socketRef.current.emit('user_connected', user.id);\n    \n    // Cleanup socket connection\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [user]);\n  \n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !user || !user.isAdmin) return;\n    \n    // Listen for new pending messages\n    socketRef.current.on('pending_approval', (message) => {\n      console.log('New message pending approval:', message);\n      setPendingMessages(prev => [...prev, message]);\n    });\n    \n    // Listen for message rejections\n    socketRef.current.on('message_rejected', (messageId) => {\n      setPendingMessages(prev => prev.filter(msg => msg.id !== messageId && msg._id !== messageId));\n    });\n    \n    // Listen for message approvals\n    socketRef.current.on('approved_message', (message) => {\n      setPendingMessages(prev => prev.filter(msg => msg.id !== message.id && msg._id !== message._id));\n    });\n    \n    return () => {\n      socketRef.current.off('pending_approval');\n      socketRef.current.off('message_rejected');\n      socketRef.current.off('approved_message');\n    };\n  }, [user]);\n  \n  // Fetch pending messages and users\n  useEffect(() => {\n    if (!user || !user.isAdmin) return;\n    \n    const fetchData = async () => {\n      try {\n        // Fetch pending messages\n        const messagesResponse = await axios.get('/api/messages/pending');\n        if (messagesResponse.data.success) {\n          setPendingMessages(messagesResponse.data.messages);\n        }\n        \n        // Fetch users\n        const usersResponse = await axios.get('/api/users');\n        if (usersResponse.data.success) {\n          setUsers(usersResponse.data.users);\n        }\n      } catch (error) {\n        console.error('Error fetching admin data:', error);\n        setError('Error loading data');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, [user]);\n  \n  // Handle approving a message\n  const handleApproveMessage = async (messageId) => {\n    if (!socketRef.current) return;\n    \n    try {\n      // First try the socket approach (real-time)\n      socketRef.current.emit('approve_message', messageId);\n      \n      // Also make the API call as a fallback\n      const response = await axios.put(`/api/messages/${messageId}/approve`);\n      \n      if (response.data.success) {\n        // Remove from pending messages\n        setPendingMessages((prev) => prev.filter((msg) => msg.id !== messageId && msg._id !== messageId));\n      }\n    } catch (error) {\n      console.error('Error approving message:', error);\n    }\n  };\n  \n  // Handle deleting a message\n  const handleDeleteMessage = async (messageId) => {\n    if (!socketRef.current) return;\n    \n    try {\n      // First try the socket approach (real-time)\n      socketRef.current.emit('reject_message', messageId);\n      \n      // Also make the API call as a fallback\n      const response = await axios.delete(`/api/messages/${messageId}`);\n      \n      if (response.data.success) {\n        // Remove from pending messages\n        setPendingMessages((prev) => prev.filter((msg) => msg.id !== messageId && msg._id !== messageId));\n      }\n    } catch (error) {\n      console.error('Error deleting message:', error);\n    }\n  };\n  \n  // Handle promoting/demoting user admin status\n  const handleToggleAdmin = async (userId, isAdmin) => {\n    try {\n      const response = await axios.put(`/api/users/${userId}`, {\n        isAdmin: !isAdmin,\n      });\n      \n      if (response.data.success) {\n        // Update users list with new admin status\n        setUsers((prev) =>\n          prev.map((u) =>\n            u.id === userId ? { ...u, isAdmin: !isAdmin } : u\n          )\n        );\n      }\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n  \n  if (!user || !user.isAdmin) {\n    return (\n      <>\n        <Navigation />\n        <AdminContainer>\n          <AdminHeader>\n            <h1>Access Denied</h1>\n            <p>You need admin privileges to view this page.</p>\n          </AdminHeader>\n        </AdminContainer>\n      </>\n    );\n  }\n  \n  return (\n    <>\n      <Navigation />\n      <AdminContainer>\n        <AdminHeader>\n          <h1>Admin Panel</h1>\n          <p>Manage messages and users</p>\n        </AdminHeader>\n        \n        <TabsContainer>\n          <Tab\n            active={activeTab === 'messages'}\n            onClick={() => setActiveTab('messages')}\n          >\n            Pending Messages {pendingMessages.length > 0 && <Badge>{pendingMessages.length}</Badge>}\n          </Tab>\n          <Tab\n            active={activeTab === 'users'}\n            onClick={() => setActiveTab('users')}\n          >\n            User Management\n          </Tab>\n        </TabsContainer>\n        \n        {loading ? (\n          <LoadingMessage>Loading...</LoadingMessage>\n        ) : error ? (\n          <ErrorMessage>{error}</ErrorMessage>\n        ) : (\n          <>\n            {activeTab === 'messages' && (\n              <ContentSection>\n                <SectionTitle>Messages Awaiting Approval</SectionTitle>\n                \n                {pendingMessages.length === 0 ? (\n                  <EmptyMessage>No messages awaiting approval.</EmptyMessage>\n                ) : (\n                  <MessageList>\n                    {pendingMessages.map((message) => (\n                      <MessageItem key={message.id || message._id}>\n                        <MessageInfo>\n                          <MessageSender>{message.sender?.username || 'User'}</MessageSender>\n                          <MessageDate>\n                            {new Date(message.createdAt).toLocaleString()}\n                          </MessageDate>\n                        </MessageInfo>\n                        <MessageContent>{message.content}</MessageContent>\n                        <MessageActions>\n                          <ApproveButton onClick={() => handleApproveMessage(message.id || message._id)}>\n                            Approve\n                          </ApproveButton>\n                          <RejectButton onClick={() => handleDeleteMessage(message.id || message._id)}>\n                            Reject\n                          </RejectButton>\n                        </MessageActions>\n                      </MessageItem>\n                    ))}\n                  </MessageList>\n                )}\n              </ContentSection>\n            )}\n            \n            {activeTab === 'users' && (\n              <ContentSection>\n                <SectionTitle>User Management</SectionTitle>\n                \n                {users.length === 0 ? (\n                  <EmptyMessage>No users found.</EmptyMessage>\n                ) : (\n                  <Table>\n                    <thead>\n                      <tr>\n                        <th>Username</th>\n                        <th>Status</th>\n                        <th>Last Seen</th>\n                        <th>Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {users.map((u) => (\n                        <tr key={u.id}>\n                          <td>{u.username}</td>\n                          <td>\n                            {u.isAdmin ? (\n                              <AdminBadge>Admin</AdminBadge>\n                            ) : (\n                              <UserBadge>Regular User</UserBadge>\n                            )}\n                          </td>\n                          <td>{new Date(u.lastSeen).toLocaleString()}</td>\n                          <td>\n                            {u.id !== user.id && (\n                              <ActionButton\n                                isAdmin={u.isAdmin}\n                                onClick={() => handleToggleAdmin(u.id, u.isAdmin)}\n                              >\n                                {u.isAdmin ? 'Remove Admin' : 'Make Admin'}\n                              </ActionButton>\n                            )}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </Table>\n                )}\n              </ContentSection>\n            )}\n          </>\n        )}\n      </AdminContainer>\n    </>\n  );\n};\n\nconst AdminContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem;\n`;\n\nconst AdminHeader = styled.div`\n  text-align: center;\n  margin-bottom: 2rem;\n  \n  h1 {\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n  \n  p {\n    color: var(--text-secondary);\n  }\n`;\n\nconst TabsContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  border-bottom: 1px solid var(--border-color);\n`;\n\nconst Tab = styled.button`\n  padding: 0.8rem 1.5rem;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 1rem;\n  color: ${(props) => (props.active ? 'var(--accent-color)' : 'var(--text-secondary)')};\n  border-bottom: ${(props) => (props.active ? '3px solid var(--accent-color)' : 'none')};\n  margin-bottom: -1px;\n  position: relative;\n  \n  &:hover {\n    color: var(--accent-color);\n  }\n`;\n\nconst Badge = styled.span`\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: var(--danger-color);\n  color: white;\n  font-size: 0.7rem;\n  padding: 0.1rem 0.4rem;\n  border-radius: 50%;\n  min-width: 1rem;\n  text-align: center;\n`;\n\nconst ContentSection = styled.div`\n  background-color: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px var(--shadow-color);\n  padding: 2rem;\n`;\n\nconst SectionTitle = styled.h2`\n  color: var(--text-primary);\n  margin-bottom: 1.5rem;\n  font-size: 1.3rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 1px solid var(--border-color);\n`;\n\nconst LoadingMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n  font-size: 1.1rem;\n`;\n\nconst ErrorMessage = styled.div`\n  text-align: center;\n  color: var(--danger-color);\n  margin: 2rem 0;\n  font-weight: 500;\n`;\n\nconst EmptyMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n`;\n\nconst MessageList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n\nconst MessageItem = styled.div`\n  padding: 1.5rem;\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  background-color: var(--bg-tertiary);\n`;\n\nconst MessageInfo = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n`;\n\nconst MessageSender = styled.div`\n  font-weight: 500;\n  color: var(--text-primary);\n`;\n\nconst MessageDate = styled.div`\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n`;\n\nconst MessageContent = styled.div`\n  margin-bottom: 1.5rem;\n  background-color: var(--bg-primary);\n  padding: 1rem;\n  border-radius: 4px;\n  word-break: break-word;\n  color: var(--text-secondary);\n`;\n\nconst MessageActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n`;\n\nconst ApproveButton = styled.button`\n  background-color: var(--success-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.6rem 1.2rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #27ae60;\n  }\n`;\n\nconst RejectButton = styled.button`\n  background-color: var(--danger-color);\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.6rem 1.2rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #c0392b;\n  }\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  \n  th, td {\n    padding: 1rem;\n    text-align: left;\n    border-bottom: 1px solid var(--border-color);\n  }\n  \n  th {\n    color: var(--text-primary);\n    font-weight: 500;\n  }\n  \n  td {\n    color: var(--text-secondary);\n  }\n  \n  tbody tr:hover {\n    background-color: var(--bg-tertiary);\n  }\n`;\n\nconst AdminBadge = styled.span`\n  background-color: var(--danger-color);\n  color: var(--text-primary);\n  padding: 0.3rem 0.6rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n`;\n\nconst UserBadge = styled.span`\n  background-color: var(--bg-tertiary);\n  color: var(--text-secondary);\n  padding: 0.3rem 0.6rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n`;\n\nconst ActionButton = styled.button`\n  background-color: ${(props) => (props.isAdmin ? 'var(--danger-color)' : 'var(--accent-color)')};\n  color: var(--text-primary);\n  border: none;\n  border-radius: 4px;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: ${(props) => (props.isAdmin ? '#c0392b' : 'var(--accent-hover)')};\n  }\n`;\n\nexport default AdminDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}