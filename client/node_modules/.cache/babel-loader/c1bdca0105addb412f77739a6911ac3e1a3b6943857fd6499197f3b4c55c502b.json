{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/orv/Documents/Projects/offline-chat/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/home/orv/Documents/Projects/offline-chat/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11;import React,{useState,useEffect,useRef}from'react';import{useParams,Link}from'react-router-dom';import styled from'styled-components';import axios from'axios';import{io}from'socket.io-client';import{useAuth}from'../context/AuthContext';import Navigation from'../components/Navigation';import{SOCKET_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PrivateChat=()=>{const{userId}=useParams();const{user}=useAuth();const[recipientUser,setRecipientUser]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState('');const socketRef=useRef();const messagesEndRef=useRef(null);// Scroll to the bottom of messages\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};// Initialize socket connection and fetch messages\nuseEffect(()=>{if(!user||!userId)return;socketRef.current=io(SOCKET_URL);// Connect user\nsocketRef.current.emit('user_connected',user.id);// Fetch user info and messages\nconst fetchData=async()=>{try{setError('');// Fetch recipient user info using the chat route\nconst userResponse=await axios.get(\"/api/users/chat/\".concat(userId));if(userResponse.data.success){setRecipientUser(userResponse.data.user);// Fetch messages between current user and recipient\nconst messagesResponse=await axios.get(\"/api/messages/private/\".concat(userId));if(messagesResponse.data.success){// Sort messages by creation time (oldest first)\nconst sortedMessages=messagesResponse.data.messages.sort((a,b)=>new Date(a.createdAt)-new Date(b.createdAt));setMessages(sortedMessages);}}else{setError('User not found');}}catch(error){var _error$response,_error$response$data;console.error('Error fetching data:',error);setError('Error loading data. '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||''));}finally{setLoading(false);}};fetchData();// Cleanup socket connection\nreturn()=>{if(socketRef.current){socketRef.current.disconnect();}};},[userId,user]);// Set up socket event listeners\nuseEffect(()=>{if(!socketRef.current||!user||!userId)return;// Listen for private messages\nsocketRef.current.on('receive_private_message',message=>{var _message$sender,_message$sender2,_message$recipient,_message$recipient2;console.log('Received private message:',message);// Normalize message format to handle different ID formats\nconst normalizedMessage=_objectSpread(_objectSpread({},message),{},{sender:{id:((_message$sender=message.sender)===null||_message$sender===void 0?void 0:_message$sender.id)||message.sender||message.senderId,username:message.senderUsername||((_message$sender2=message.sender)===null||_message$sender2===void 0?void 0:_message$sender2.username)},recipient:{id:((_message$recipient=message.recipient)===null||_message$recipient===void 0?void 0:_message$recipient.id)||message.recipient||message.recipientId,username:message.recipientUsername||((_message$recipient2=message.recipient)===null||_message$recipient2===void 0?void 0:_message$recipient2.username)}});// Only add message if it's from the current chat\nconst recipientId=parseInt(userId);const senderId=parseInt(normalizedMessage.sender.id);const currentUserId=parseInt(user.id);if(senderId===recipientId&&normalizedMessage.recipient.id===currentUserId||senderId===currentUserId&&normalizedMessage.recipient.id===recipientId){setMessages(prevMessages=>[...prevMessages,normalizedMessage]);}});// Confirmation that message was sent\nsocketRef.current.on('private_message_sent',message=>{console.log('Private message sent:',message);});// Error handling\nsocketRef.current.on('message_error',error=>{console.error('Message error:',error);setError(error.error||'Error sending message');setTimeout(()=>setError(''),3000);});return()=>{socketRef.current.off('receive_private_message');socketRef.current.off('private_message_sent');socketRef.current.off('message_error');};},[userId,user]);// Scroll to bottom when messages update\nuseEffect(()=>{scrollToBottom();},[messages]);// Send a new message\nconst sendMessage=e=>{e.preventDefault();if(!newMessage.trim()||!user||!recipientUser)return;// Send message through socket\nsocketRef.current.emit('send_private_message',{sender:user.id,recipient:parseInt(userId),content:newMessage.trim()});// Optimistically add message to UI\nconst optimisticMessage={id:Date.now().toString(),// Temporary ID\nsender:{id:user.id,username:user.username},recipient:{id:parseInt(userId),username:(recipientUser===null||recipientUser===void 0?void 0:recipientUser.username)||'User'},content:newMessage.trim(),createdAt:new Date().toISOString()};setMessages(prev=>[...prev,optimisticMessage]);// Clear input\nsetNewMessage('');};// Format message for display\nconst formatMessage=message=>{var _message$sender3;// Normalize IDs to handle different formats\nconst senderId=((_message$sender3=message.sender)===null||_message$sender3===void 0?void 0:_message$sender3.id)||message.sender;const currentUserId=user.id;return{id:message.id||message._id,isOwnMessage:parseInt(senderId)===parseInt(currentUserId),content:message.content,time:new Date(message.createdAt).toLocaleTimeString()};};if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Please log in to view this page.\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(ChatContainer,{children:[/*#__PURE__*/_jsxs(ChatHeader,{children:[/*#__PURE__*/_jsx(BackLink,{to:\"/dashboard\",children:\"\\xAB Back to Dashboard\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(ErrorMessage,{children:error}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Chat with \",recipientUser===null||recipientUser===void 0?void 0:recipientUser.username]})})]}),/*#__PURE__*/_jsxs(MessagesContainer,{children:[loading?/*#__PURE__*/_jsx(LoadingMessage,{children:\"Loading messages...\"}):error?/*#__PURE__*/_jsx(ErrorMessage,{children:error}):messages.length===0?/*#__PURE__*/_jsx(EmptyMessage,{children:\"No messages yet. Start the conversation!\"}):messages.map(message=>{const formattedMessage=formatMessage(message);return/*#__PURE__*/_jsxs(MessageBubble,{isOwnMessage:formattedMessage.isOwnMessage,children:[/*#__PURE__*/_jsx(MessageContent,{children:formattedMessage.content}),/*#__PURE__*/_jsx(MessageTime,{children:formattedMessage.time})]},formattedMessage.id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(MessageForm,{onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(MessageInput,{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"Type your message...\",disabled:loading||!!error||!recipientUser,autoFocus:true}),/*#__PURE__*/_jsx(SendButton,{type:\"submit\",disabled:loading||!!error||!recipientUser||!newMessage.trim(),children:\"Send\"})]})]})]});};const ChatContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 900px;\\n  margin: 0 auto;\\n  height: calc(100vh - 60px);\\n  display: flex;\\n  flex-direction: column;\\n\"])));const ChatHeader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 1.5rem;\\n  background-color: var(--bg-secondary);\\n  border-bottom: 1px solid var(--border-color);\\n  \\n  h2 {\\n    margin: 0.5rem 0;\\n    color: var(--text-primary);\\n    text-align: center;\\n  }\\n\"])));const BackLink=styled(Link)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin-bottom: 1rem;\\n  color: var(--accent-color);\\n  \\n  &:hover {\\n    text-decoration: underline;\\n  }\\n\"])));const MessagesContainer=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 1.5rem;\\n  overflow-y: auto;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 1rem;\\n  background-color: var(--bg-primary);\\n\"])));const LoadingMessage=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  color: var(--text-secondary);\\n  margin: 2rem 0;\\n\"])));const ErrorMessage=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  color: var(--danger-color);\\n  margin: 1rem 0;\\n\"])));const EmptyMessage=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  color: var(--text-secondary);\\n  margin: 2rem 0;\\n\"])));const MessageBubble=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  max-width: 70%;\\n  padding: 0.75rem 1rem;\\n  border-radius: 10px;\\n  align-self: \",\";\\n  background-color: \",\";\\n  color: var(--text-primary);\\n  position: relative;\\n\"])),props=>props.isOwnMessage?'flex-end':'flex-start',props=>props.isOwnMessage?'var(--accent-color)':'var(--bg-tertiary)');const MessageContent=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  margin-bottom: 0.25rem;\\n  word-break: break-word;\\n\"])));const MessageTime=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  font-size: 0.7rem;\\n  color: \",\";\\n  text-align: right;\\n\"])),props=>props.isOwnMessage?'rgba(255, 255, 255, 0.7)':'var(--text-secondary)');const MessageForm=styled.form(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  display: flex;\\n  padding: 1rem;\\n  background-color: var(--bg-secondary);\\n  border-top: 1px solid var(--border-color);\\n\"])));const MessageInput=styled.input(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 0.75rem;\\n  border: 1px solid var(--border-color);\\n  border-radius: 4px;\\n  background-color: var(--bg-tertiary);\\n  color: var(--text-primary);\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: var(--accent-color);\\n  }\\n  \\n  &:disabled {\\n    opacity: 0.7;\\n    cursor: not-allowed;\\n  }\\n\"])));const SendButton=styled.button(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  margin-left: 0.5rem;\\n  padding: 0.75rem 1.5rem;\\n  background-color: var(--accent-color);\\n  color: white;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  \\n  &:hover:not(:disabled) {\\n    background-color: var(--accent-hover);\\n  }\\n  \\n  &:disabled {\\n    opacity: 0.7;\\n    cursor: not-allowed;\\n  }\\n\"])));export default PrivateChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Link","styled","axios","io","useAuth","Navigation","SOCKET_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PrivateChat","userId","user","recipientUser","setRecipientUser","messages","setMessages","newMessage","setNewMessage","loading","setLoading","error","setError","socketRef","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","emit","id","fetchData","userResponse","get","concat","data","success","messagesResponse","sortedMessages","sort","a","b","Date","createdAt","_error$response","_error$response$data","console","response","message","disconnect","on","_message$sender","_message$sender2","_message$recipient","_message$recipient2","log","normalizedMessage","_objectSpread","sender","senderId","username","senderUsername","recipient","recipientId","recipientUsername","parseInt","currentUserId","prevMessages","setTimeout","off","sendMessage","e","preventDefault","trim","content","optimisticMessage","now","toString","toISOString","prev","formatMessage","_message$sender3","_id","isOwnMessage","time","toLocaleTimeString","children","ChatContainer","ChatHeader","BackLink","to","ErrorMessage","MessagesContainer","LoadingMessage","length","EmptyMessage","map","formattedMessage","MessageBubble","MessageContent","MessageTime","ref","MessageForm","onSubmit","MessageInput","type","value","onChange","target","placeholder","disabled","autoFocus","SendButton","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","props","_templateObject9","_templateObject0","form","_templateObject1","input","_templateObject10","button","_templateObject11"],"sources":["/home/orv/Documents/Projects/offline-chat/client/src/pages/PrivateChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { useAuth } from '../context/AuthContext';\nimport Navigation from '../components/Navigation';\nimport { SOCKET_URL } from '../config';\n\nconst PrivateChat = () => {\n  const { userId } = useParams();\n  const { user } = useAuth();\n  \n  const [recipientUser, setRecipientUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  const socketRef = useRef();\n  const messagesEndRef = useRef(null);\n  \n  // Scroll to the bottom of messages\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n  \n  // Initialize socket connection and fetch messages\n  useEffect(() => {\n    if (!user || !userId) return;\n\n    socketRef.current = io(SOCKET_URL);\n    \n    // Connect user\n    socketRef.current.emit('user_connected', user.id);\n    \n    // Fetch user info and messages\n    const fetchData = async () => {\n      try {\n        setError('');\n        // Fetch recipient user info using the chat route\n        const userResponse = await axios.get(`/api/users/chat/${userId}`);\n        \n        if (userResponse.data.success) {\n          setRecipientUser(userResponse.data.user);\n          \n          // Fetch messages between current user and recipient\n          const messagesResponse = await axios.get(`/api/messages/private/${userId}`);\n          \n          if (messagesResponse.data.success) {\n            // Sort messages by creation time (oldest first)\n            const sortedMessages = messagesResponse.data.messages.sort(\n              (a, b) => new Date(a.createdAt) - new Date(b.createdAt)\n            );\n            setMessages(sortedMessages);\n          }\n        } else {\n          setError('User not found');\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Error loading data. ' + (error.response?.data?.message || ''));\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n    \n    // Cleanup socket connection\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [userId, user]);\n  \n  // Set up socket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !user || !userId) return;\n    \n    // Listen for private messages\n    socketRef.current.on('receive_private_message', (message) => {\n      console.log('Received private message:', message);\n      \n      // Normalize message format to handle different ID formats\n      const normalizedMessage = {\n        ...message,\n        sender: {\n          id: message.sender?.id || message.sender || message.senderId,\n          username: message.senderUsername || message.sender?.username\n        },\n        recipient: {\n          id: message.recipient?.id || message.recipient || message.recipientId,\n          username: message.recipientUsername || message.recipient?.username\n        }\n      };\n      \n      // Only add message if it's from the current chat\n      const recipientId = parseInt(userId);\n      const senderId = parseInt(normalizedMessage.sender.id);\n      const currentUserId = parseInt(user.id);\n      \n      if ((senderId === recipientId && normalizedMessage.recipient.id === currentUserId) || \n          (senderId === currentUserId && normalizedMessage.recipient.id === recipientId)) {\n        setMessages((prevMessages) => [...prevMessages, normalizedMessage]);\n      }\n    });\n    \n    // Confirmation that message was sent\n    socketRef.current.on('private_message_sent', (message) => {\n      console.log('Private message sent:', message);\n    });\n    \n    // Error handling\n    socketRef.current.on('message_error', (error) => {\n      console.error('Message error:', error);\n      setError(error.error || 'Error sending message');\n      setTimeout(() => setError(''), 3000);\n    });\n    \n    return () => {\n      socketRef.current.off('receive_private_message');\n      socketRef.current.off('private_message_sent');\n      socketRef.current.off('message_error');\n    };\n  }, [userId, user]);\n  \n  // Scroll to bottom when messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  \n  // Send a new message\n  const sendMessage = (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim() || !user || !recipientUser) return;\n    \n    // Send message through socket\n    socketRef.current.emit('send_private_message', {\n      sender: user.id,\n      recipient: parseInt(userId),\n      content: newMessage.trim(),\n    });\n    \n    // Optimistically add message to UI\n    const optimisticMessage = {\n      id: Date.now().toString(), // Temporary ID\n      sender: {\n        id: user.id,\n        username: user.username,\n      },\n      recipient: {\n        id: parseInt(userId),\n        username: recipientUser?.username || 'User',\n      },\n      content: newMessage.trim(),\n      createdAt: new Date().toISOString(),\n    };\n    \n    setMessages((prev) => [...prev, optimisticMessage]);\n    \n    // Clear input\n    setNewMessage('');\n  };\n  \n  // Format message for display\n  const formatMessage = (message) => {\n    // Normalize IDs to handle different formats\n    const senderId = message.sender?.id || message.sender;\n    const currentUserId = user.id;\n    \n    return {\n      id: message.id || message._id,\n      isOwnMessage: parseInt(senderId) === parseInt(currentUserId),\n      content: message.content,\n      time: new Date(message.createdAt).toLocaleTimeString(),\n    };\n  };\n  \n  if (!user) {\n    return <div>Please log in to view this page.</div>;\n  }\n  \n  return (\n    <>\n      <Navigation />\n      <ChatContainer>\n        <ChatHeader>\n          <BackLink to=\"/dashboard\">Â« Back to Dashboard</BackLink>\n          {loading ? (\n            <div>Loading...</div>\n          ) : error ? (\n            <ErrorMessage>{error}</ErrorMessage>\n          ) : (\n            <>\n              <h2>Chat with {recipientUser?.username}</h2>\n            </>\n          )}\n        </ChatHeader>\n        \n        <MessagesContainer>\n          {loading ? (\n            <LoadingMessage>Loading messages...</LoadingMessage>\n          ) : error ? (\n            <ErrorMessage>{error}</ErrorMessage>\n          ) : messages.length === 0 ? (\n            <EmptyMessage>No messages yet. Start the conversation!</EmptyMessage>\n          ) : (\n            messages.map((message) => {\n              const formattedMessage = formatMessage(message);\n              return (\n                <MessageBubble\n                  key={formattedMessage.id}\n                  isOwnMessage={formattedMessage.isOwnMessage}\n                >\n                  <MessageContent>{formattedMessage.content}</MessageContent>\n                  <MessageTime>{formattedMessage.time}</MessageTime>\n                </MessageBubble>\n              );\n            })\n          )}\n          <div ref={messagesEndRef} />\n        </MessagesContainer>\n        \n        <MessageForm onSubmit={sendMessage}>\n          <MessageInput\n            type=\"text\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            placeholder=\"Type your message...\"\n            disabled={loading || !!error || !recipientUser}\n            autoFocus\n          />\n          <SendButton type=\"submit\" disabled={loading || !!error || !recipientUser || !newMessage.trim()}>\n            Send\n          </SendButton>\n        </MessageForm>\n      </ChatContainer>\n    </>\n  );\n};\n\nconst ChatContainer = styled.div`\n  max-width: 900px;\n  margin: 0 auto;\n  height: calc(100vh - 60px);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ChatHeader = styled.div`\n  padding: 1.5rem;\n  background-color: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  \n  h2 {\n    margin: 0.5rem 0;\n    color: var(--text-primary);\n    text-align: center;\n  }\n`;\n\nconst BackLink = styled(Link)`\n  display: block;\n  margin-bottom: 1rem;\n  color: var(--accent-color);\n  \n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst MessagesContainer = styled.div`\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  background-color: var(--bg-primary);\n`;\n\nconst LoadingMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n`;\n\nconst ErrorMessage = styled.div`\n  text-align: center;\n  color: var(--danger-color);\n  margin: 1rem 0;\n`;\n\nconst EmptyMessage = styled.div`\n  text-align: center;\n  color: var(--text-secondary);\n  margin: 2rem 0;\n`;\n\nconst MessageBubble = styled.div`\n  max-width: 70%;\n  padding: 0.75rem 1rem;\n  border-radius: 10px;\n  align-self: ${(props) => (props.isOwnMessage ? 'flex-end' : 'flex-start')};\n  background-color: ${(props) =>\n    props.isOwnMessage ? 'var(--accent-color)' : 'var(--bg-tertiary)'};\n  color: var(--text-primary);\n  position: relative;\n`;\n\nconst MessageContent = styled.div`\n  margin-bottom: 0.25rem;\n  word-break: break-word;\n`;\n\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  color: ${(props) =>\n    props.isOwnMessage ? 'rgba(255, 255, 255, 0.7)' : 'var(--text-secondary)'};\n  text-align: right;\n`;\n\nconst MessageForm = styled.form`\n  display: flex;\n  padding: 1rem;\n  background-color: var(--bg-secondary);\n  border-top: 1px solid var(--border-color);\n`;\n\nconst MessageInput = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--bg-tertiary);\n  color: var(--text-primary);\n  \n  &:focus {\n    outline: none;\n    border-color: var(--accent-color);\n  }\n  \n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;\n\nconst SendButton = styled.button`\n  margin-left: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background-color: var(--accent-color);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  \n  &:hover:not(:disabled) {\n    background-color: var(--accent-hover);\n  }\n  \n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;\n\nexport default PrivateChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}